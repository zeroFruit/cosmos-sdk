(window.webpackJsonp=window.webpackJsonp||[]).push([[110],{846:function(e,t,o){"use strict";o.r(t);var a=o(1),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"encoding"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#encoding"}},[e._v("#")]),e._v(" Encoding")]),e._v(" "),o("h2",{attrs:{hide:"",id:"pre-requisite-readings"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisite-readings"}},[e._v("#")]),e._v(" Pre-requisite Readings")]),e._v(" "),o("ul",[o("li",{attrs:{prereq:""}},[o("RouterLink",{attrs:{to:"/basics/app-anatomy.html"}},[e._v("Anatomy of an SDK application")])],1)]),e._v(" "),o("h2",{attrs:{id:"encoding-2"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#encoding-2"}},[e._v("#")]),e._v(" Encoding")]),e._v(" "),o("p",[e._v("Every Cosmos SDK application exposes a global "),o("code",[e._v("codec")]),e._v(" to marshal/unmarshal structs and interfaces in order to store and/or transfer them. As of now, the "),o("code",[e._v("codec")]),e._v(" used in the Cosmos SDK is "),o("a",{attrs:{href:"https://github.com/tendermint/go-amino",target:"_blank",rel:"noopener noreferrer"}},[e._v("go-amino"),o("OutboundLink")],1),e._v(", which possesses the following important properties:")]),e._v(" "),o("ul",[o("li",[e._v("Interface support.")]),e._v(" "),o("li",[e._v("Deterministic encoding of value (which is required considering that blockchains are deterministic replicated state-machines).")]),e._v(" "),o("li",[e._v("Upgradeable schemas.")])]),e._v(" "),o("p",[e._v("The application's "),o("code",[e._v("codec")]),e._v(" is typically initialized in the "),o("RouterLink",{attrs:{to:"/basics/app-anatomy.html#constructor-function"}},[e._v("application's constructor function")]),e._v(", where it is also passed to each of the application's modules via the "),o("RouterLink",{attrs:{to:"/building-modules/module-manager.html#basic-manager"}},[e._v("basic manager")]),e._v(".")],1),e._v(" "),o("p",[e._v("Among other things, the "),o("code",[e._v("codec")]),e._v(" is used by module's "),o("RouterLink",{attrs:{to:"/building-modules/keeper.html"}},[o("code",[e._v("keeper")]),e._v("s")]),e._v(" to marshal objects into "),o("code",[e._v("[]byte")]),e._v(" before storing them in the module's "),o("RouterLink",{attrs:{to:"/core/store.html#kvstore"}},[o("code",[e._v("KVStore")])]),e._v(", or to unmarshal them from "),o("code",[e._v("[]byte")]),e._v(" when retrieving them:")],1),e._v(" "),o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gdHlwaWNhbCBwYXR0ZXJuIHRvIG1hcnNoYWwgYW4gb2JqZWN0IHRvIFtdYnl0ZSBiZWZvcmUgc3RvcmluZyBpdApieiA6PSBrZWVwZXIuY2RjLk11c3RNYXJzaGFsQmluYXJ5QmFyZShvYmplY3QpCgovL3R5cGljYWwgcGF0dGVybiB0byB1bm1hcnNoYWwgYW4gb2JqZWN0IGZyb20gW11ieXRlIHdoZW4gcmV0cmlldmluZyBpdAprZWVwZXIuY2RjLk11c3RVbm1hcnNoYWxCaW5hcnlCYXJlKGJ6LCAmYW1wO29iamVjdCkK"}}),e._v(" "),o("p",[e._v("Alternatively, it is possible to use "),o("code",[e._v("MustMarshalBinaryLengthPrefixed")]),e._v("/"),o("code",[e._v("MustUnmarshalBinaryLengthPrefixed")]),e._v(" instead of "),o("code",[e._v("MustMarshalBinaryBare")]),e._v("/"),o("code",[e._v("MustUnmarshalBinaryBare")]),e._v(" for the same encoding prefixed by a "),o("code",[e._v("uvarint")]),e._v(" encoding of the object to encode.")]),e._v(" "),o("p",[e._v("Another important use of the "),o("code",[e._v("codec")]),e._v(" is the encoding and decoding of "),o("RouterLink",{attrs:{to:"/core/transactions.html"}},[e._v("transactions")]),e._v(". Transactions are defined at the Cosmos SDK level, but passed to the underlying consensus engine in order to be relayed to other peers. Since the underlying consensus engine is agnostic to the application, it only accepts transactions in the form of "),o("code",[e._v("[]byte")]),e._v(". The encoding is done by an object called "),o("code",[e._v("TxEncoder")]),e._v(" and the decoding by an object called "),o("code",[e._v("TxDecoder")]),e._v(".")],1),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gVHhEZWNvZGVyIHVubWFyc2hhbHMgdHJhbnNhY3Rpb24gYnl0ZXMKdHlwZSBUeERlY29kZXIgZnVuYyh0eEJ5dGVzIFtdYnl0ZSkgKFR4LCBFcnJvcikKCi8vIFR4RW5jb2RlciBtYXJzaGFscyB0cmFuc2FjdGlvbiB0byBieXRlcwp0eXBlIFR4RW5jb2RlciBmdW5jKHR4IFR4KSAoW11ieXRlLCBlcnJvcik="}})],1),e._v(" "),o("p",[e._v("A standard implementation of both these objects can be found in the "),o("a",{attrs:{href:"https://github.com/cosmos/cosmos-sdk/blob/master/x/auth",target:"_blank",rel:"noopener noreferrer"}},[o("code",[e._v("auth")]),e._v(" module"),o("OutboundLink")],1),e._v(":")]),e._v(" "),o("p",[o("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gRGVmYXVsdFR4RGVjb2RlciBsb2dpYyBmb3Igc3RhbmRhcmQgdHJhbnNhY3Rpb24gZGVjb2RpbmcKZnVuYyBEZWZhdWx0VHhEZWNvZGVyKGNkYyAqY29kZWMuQ29kZWMpIHNkay5UeERlY29kZXIgewoJcmV0dXJuIGZ1bmModHhCeXRlcyBbXWJ5dGUpIChzZGsuVHgsIHNkay5FcnJvcikgewoJCXZhciB0eCA9IFN0ZFR4e30KCgkJaWYgbGVuKHR4Qnl0ZXMpID09IDAgewoJCQlyZXR1cm4gbmlsLCBzZGsuRXJyVHhEZWNvZGUoJnF1b3Q7dHhCeXRlcyBhcmUgZW1wdHkmcXVvdDspCgkJfQoKCQkvLyBTdGRUeC5Nc2cgaXMgYW4gaW50ZXJmYWNlLiBUaGUgY29uY3JldGUgdHlwZXMKCQkvLyBhcmUgcmVnaXN0ZXJlZCBieSBNYWtlVHhDb2RlYwoJCWVyciA6PSBjZGMuVW5tYXJzaGFsQmluYXJ5TGVuZ3RoUHJlZml4ZWQodHhCeXRlcywgJmFtcDt0eCkKCQlpZiBlcnIgIT0gbmlsIHsKCQkJcmV0dXJuIG5pbCwgc2RrLkVyclR4RGVjb2RlKCZxdW90O2Vycm9yIGRlY29kaW5nIHRyYW5zYWN0aW9uJnF1b3Q7KS5UcmFjZVNESyhlcnIuRXJyb3IoKSkKCQl9CgoJCXJldHVybiB0eCwgbmlsCgl9Cn0KCi8vIERlZmF1bHRUeEVuY29kZXIgbG9naWMgZm9yIHN0YW5kYXJkIHRyYW5zYWN0aW9uIGVuY29kaW5nCmZ1bmMgRGVmYXVsdFR4RW5jb2RlcihjZGMgKmNvZGVjLkNvZGVjKSBzZGsuVHhFbmNvZGVyIHsKCXJldHVybiBmdW5jKHR4IHNkay5UeCkgKFtdYnl0ZSwgZXJyb3IpIHsKCQlyZXR1cm4gY2RjLk1hcnNoYWxCaW5hcnlMZW5ndGhQcmVmaXhlZCh0eCkKCX0KfQ=="}})],1),e._v(" "),o("h2",{attrs:{hide:"",id:"next"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#next"}},[e._v("#")]),e._v(" Next")]),e._v(" "),o("p",{attrs:{hide:""}},[e._v("Learn about "),o("RouterLink",{attrs:{to:"/core/events.html"}},[e._v("events")])],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);